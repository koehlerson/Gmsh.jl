<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial 1 · Gmsh API for Julia</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Gmsh API for Julia</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorial</span><ul><li class="is-active"><a class="tocitem" href>Tutorial 1</a><ul class="internal"><li><a class="tocitem" href="#Geometry-basics,-elementary-entities,-physical-groups"><span>Geometry basics, elementary entities, physical groups</span></a></li></ul></li><li><a class="tocitem" href="../t2/">Tutorial 2</a></li><li><a class="tocitem" href="../t3/">Tutorial 3</a></li><li><a class="tocitem" href="../t4/">Tutorial 4</a></li><li><a class="tocitem" href="../t5/">Tutorial 5</a></li><li><a class="tocitem" href="../t10/">Tutorial 10</a></li></ul></li><li><span class="tocitem">Built-in Geometry Kernel</span><ul><li><a class="tocitem" href="../../geo/geometry/">Geometry</a></li><li><a class="tocitem" href="../../geo/mesh/">Mesh Constraints</a></li></ul></li><li><span class="tocitem">Model</span><ul><li><a class="tocitem" href="../../model/model/">Model</a></li><li><a class="tocitem" href="../../model/mesh/">Meshing</a></li></ul></li><li><a class="tocitem" href="../../options/options/">Options</a></li><li><a class="tocitem" href="../../occ/occ/">OpenCASCADE Kernel</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorial</a></li><li class="is-active"><a href>Tutorial 1</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial 1</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/koehlerson/gmsh.jl/blob/master/docs/src/literate/t1.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial-1"><a class="docs-heading-anchor" href="#Tutorial-1">Tutorial 1</a><a id="Tutorial-1-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial-1" title="Permalink"></a></h1><h2 id="Geometry-basics,-elementary-entities,-physical-groups"><a class="docs-heading-anchor" href="#Geometry-basics,-elementary-entities,-physical-groups">Geometry basics, elementary entities, physical groups</a><a id="Geometry-basics,-elementary-entities,-physical-groups-1"></a><a class="docs-heading-anchor-permalink" href="#Geometry-basics,-elementary-entities,-physical-groups" title="Permalink"></a></h2><p>The Julia API is entirely defined in the <code>gmsh.jl</code> module (which contains the full documentation of all the functions in the API):</p><pre><code class="language-julia hljs">import gmsh</code></pre><p>Before using any functions in the Julia API, Gmsh must be initialized:</p><pre><code class="language-julia hljs">gmsh.initialize()</code></pre><p>Next we add a new model named &quot;t1&quot; (if <code>gmsh.model.add()</code> is not called a new unnamed model will be created on the fly, if necessary):</p><pre><code class="language-julia hljs">gmsh.model.add(&quot;t1&quot;)</code></pre><p>The Julia API provides direct access to each supported geometry (CAD) kernel. The built-in kernel is used in this first tutorial: the corresponding API functions have the <code>gmsh.model.geo</code> prefix.</p><p>The first type of <code>elementary entity</code> in Gmsh is a <code>Point</code>. To create a point with the built-in CAD kernel, the Julia API function is gmsh.model.geo.addPoint():</p><ul><li>the first 3 arguments are the point coordinates (x, y, z)</li><li>the next (optional) argument is the target mesh size close to the point</li><li>the last (optional) argument is the point tag (a stricly positive integer that uniquely identifies the point)</li></ul><pre><code class="language-julia hljs">lc = 1e-2
gmsh.model.geo.addPoint(0, 0, 0, lc, 1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1</code></pre><p>The distribution of the mesh element sizes will be obtained by interpolation of these mesh sizes throughout the geometry. Another method to specify mesh sizes is to use general mesh size Fields (see <code>t10.jl</code>). If no target mesh size of provided, a default uniform coarse size will be used for the model, based on the overall model size.</p><p>We can then define some additional points. All points should have different tags:</p><pre><code class="language-julia hljs">gmsh.model.geo.addPoint(.1, 0,  0, lc, 2)
gmsh.model.geo.addPoint(.1, .3, 0, lc, 3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3</code></pre><p>If the tag is not provided explicitly, a new tag is automatically created, and returned by the function:</p><pre><code class="language-julia hljs">p4 = gmsh.model.geo.addPoint(0, .3, 0, lc)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4</code></pre><p>Curves are Gmsh&#39;s second type of elementery entities, and, amongst curves, straight lines are the simplest. The API to create straight line segments with the built-in kernel follows the same conventions: the first 2 arguments are point tags (the start and end points of the line), and the last (optional one) is the line tag.</p><p>In the commands below, for example, the line 1 starts at point 1 and ends at point 2.</p><p>Note that curve tags are separate from point tags - hence we can reuse tag <code>1</code> for our first curve. And as a general rule, elementary entity tags in Gmsh have to be unique per geometrical dimension.</p><pre><code class="language-julia hljs">gmsh.model.geo.addLine(1, 2, 1)
gmsh.model.geo.addLine(3, 2, 2)
gmsh.model.geo.addLine(3, 4, 3)
gmsh.model.geo.addLine(4, 1, 4)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4</code></pre><p>The third elementary entity is the surface. In order to define a simple rectangular surface from the four curves defined above, a curve loop has first to be defined. A curve loop is defined by an ordered list of connected curves, a sign being associated with each curve (depending on the orientation of the curve to form a loop). The API function to create curve loops takes a list of integers as first argument, and the curve loop tag (which must be unique amongst curve loops) as the second (optional) argument:</p><pre><code class="language-julia hljs">gmsh.model.geo.addCurveLoop([4, 1, -2, 3], 1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1</code></pre><p>We can then define the surface as a list of curve loops (only one here, representing the external contour, since there are no holes–see <code>t4.jl</code> for an example of a surface with a hole):</p><pre><code class="language-julia hljs">gmsh.model.geo.addPlaneSurface([1], 1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1</code></pre><p>Before they can be meshed (and, more generally, before they can be used by API functions outside of the built-in CAD kernel functions), the CAD entities must be synchronized with the Gmsh model, which will create the relevant Gmsh data structures. This is achieved by the gmsh.model.geo.synchronize() API call for the built-in CAD kernel. Synchronizations can be called at any time, but they involve a non trivial amount of processing; so while you could synchronize the internal CAD data after every CAD command, it is usually better to minimize the number of synchronization points.</p><pre><code class="language-julia hljs">gmsh.model.geo.synchronize()</code></pre><p>At this level, Gmsh knows everything to display the rectangular surface 1 and to mesh it. An optional step is needed if we want to group elementary geometrical entities into more meaningful groups, e.g. to define some mathematical (&quot;domain&quot;, &quot;boundary&quot;), functional (&quot;left wing&quot;, &quot;fuselage&quot;) or material (&quot;steel&quot;, &quot;carbon&quot;) properties.</p><p>Such groups are called &quot;Physical Groups&quot; in Gmsh. By default, if physical groups are defined, Gmsh will export in output files only mesh elements that belong to at least one physical group. (To force Gmsh to save all elements, whether they belong to physical groups or not, set the `Mesh.SaveAll&#39; option to 1.) Physical groups are also identified by tags, i.e. stricly positive integers, that should be unique per dimension (0D, 1D, 2D or 3D). Physical groups can also be given names.</p><p>Here we define a physical curve that groups the left, bottom and right curves in a single group (with prescribed tag 5); and a physical surface with name &quot;My surface&quot; (with an automatic tag) containing the geometrical surface 1:</p><pre><code class="language-julia hljs">gmsh.model.addPhysicalGroup(1, [1, 2, 4], 5)
ps = gmsh.model.addPhysicalGroup(2, [1])
gmsh.model.setPhysicalName(2, ps, &quot;My surface&quot;)</code></pre><p>We can then generate a 2D mesh</p><pre><code class="language-julia hljs">gmsh.model.mesh.generate(2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Info    : Meshing 1D...
Info    : [  0%] Meshing curve 1 (Line)
Info    : [ 30%] Meshing curve 2 (Line)
Info    : [ 50%] Meshing curve 3 (Line)
Info    : [ 80%] Meshing curve 4 (Line)
Info    : Done meshing 1D (Wall 0.000325705s, CPU 0.00033s)
Info    : Meshing 2D...
Info    : Meshing surface 1 (Plane, Frontal-Delaunay)
Info    : Done meshing 2D (Wall 0.0100958s, CPU 0.01008s)
Info    : 403 nodes 808 elements</code></pre><p>... and save it to disk</p><pre><code class="language-julia hljs">gmsh.write(&quot;t1.msh&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Info    : Writing &#39;t1.msh&#39;...
Info    : Done writing &#39;t1.msh&#39;</code></pre><p>Remember that by default, if physical groups are defined, Gmsh will export in the output mesh file only those elements that belong to at least one physical group. To force Gmsh to save all elements, you can use</p><p><code>gmsh.option.setNumber(&quot;Mesh.SaveAll&quot;, 1)</code></p><p>By default, Gmsh saves meshes in the latest version of the Gmsh mesh file format (the <code>MSH</code> format). You can save meshes in other mesh formats by specifying a filename with a different extension. For example</p><p><code>gmsh.write(&quot;t1.unv&quot;)</code></p><p>will save the mesh in the UNV format. You can also save the mesh in older versions of the MSH format: simply set</p><p><code>gmsh.option.setNumber(&quot;Mesh.MshFileVersion&quot;, x)</code></p><p>for any version number <code>x</code>. As an alternative, you can also not specify the format explicitly, and just choose a filename with the <code>.msh2</code> or <code>.msh4</code> extension.</p><p>Note that starting with Gmsh 3.0, models can be built using other geometry kernels than the default &quot;built-in&quot; kernel. To use the OpenCASCADE CAD kernel instead of the built-in kernel, you should use the functions with the <code>gmsh.model.occ</code> prefix.</p><p>Different CAD kernels have different features. With OpenCASCADE, instead of defining the surface by successively defining 4 points, 4 curves and 1 curve loop, one can define the rectangular surface directly with</p><p><code>gmsh.model.occ.addRectangle(.2, 0, 0, .1, .3)</code></p><p>After synchronization with the Gmsh model with</p><p><code>gmsh.model.occ.synchronize()</code></p><p>the underlying curves and points could be accessed with <code>gmsh.model.getBoundary()</code>.</p><p>This should be called when you are done using the Gmsh Julia API:</p><pre><code class="language-julia hljs">gmsh.finalize()</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../t2/">Tutorial 2 »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Thursday 12 August 2021 11:16">Thursday 12 August 2021</span>. Using Julia version 1.5.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
